<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cleveleys Morrisons Management Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-green: #006400;
            --secondary-yellow: #FFD700;
            --background-faint-green: #e6ffe6;
            --background-white: #FFFFFF;
            --text-color: #333;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --dark-bg: #1a1a1a;
            --dark-text: #f0f0f0;
            --dark-card: #2d2d2d;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background: var(--background-faint-green);
            color: var(--text-color);
            line-height: 1.6;
            transition: var(--transition);
        }

        body.dark-mode {
            background: var(--dark-bg);
            color: var(--dark-text);
        }

        header {
            background: var(--background-white);
            padding: 1rem;
            box-shadow: var(--shadow);
            position: relative;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .header-content {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-left: auto;
            margin-right: auto;
        }

        .logo {
            height: 50px;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
        }

        h1 {
            font-size: 1.75rem;
            color: var(--primary-green);
            white-space: nowrap;
        }

        .dark-mode-toggle {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.5rem;
            transition: var(--transition);
            position: absolute;
            right: 1rem;
        }

        .nav {
            background: var(--secondary-yellow);
            padding: 0.5rem;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: var(--shadow);
        }

        .nav-links {
            display: flex;
            justify-content: center;
            gap: 1rem;
            list-style: none;
        }

        .nav-link {
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            background: var(--background-white);
            color: var(--primary-green);
            transition: var(--transition);
            font-weight: 500;
        }

        .nav-link:hover {
            background: var(--primary-green);
            color: white;
            transform: translateY(-2px);
        }

        .container {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 0 1rem;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .card {
            background: var(--background-white);
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        body.dark-mode .card {
            background: var(--dark-card);
        }

        .card h2 {
            color: var(--primary-green);
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--secondary-yellow);
        }

        .iframe-container {
            position: relative;
            padding-bottom: 56.25%;
            border-radius: 0.5rem;
            overflow: hidden;
            background: white;
        }

        .iframe-container iframe {
            position: absolute;
            width: 100%;
            height: 100%;
            border: 0;
        }

        .whiteboard-container {
            height: 500px;
            border: 2px solid var(--primary-green);
            border-radius: 1rem;
            position: relative;
            background: white;
        }

        #whiteboard {
            touch-action: none;
        }

        .whiteboard-controls {
            position: absolute;
            top: 1rem;
            right: 1rem;
            display: flex;
            gap: 0.5rem;
            background: rgba(255, 255, 255, 0.9);
            padding: 0.5rem;
            border-radius: 0.5rem;
            box-shadow: var(--shadow);
        }

        .control-btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 0.5rem;
            background: var(--primary-green);
            color: white;
            cursor: pointer;
            transition: var(--transition);
        }

        .control-btn:hover {
            background: #004d00;
            transform: scale(1.05);
        }

        .links-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .link-card {
            background: var(--primary-green);
            color: white;
            padding: 1.5rem;
            border-radius: 1rem;
            text-align: center;
            transition: var(--transition);
            min-height: 100px;
            display: grid;
            place-items: center;
        }

        .link-card:hover {
            background: #004d00;
            transform: translateY(-3px);
        }

        footer {
            background: var(--primary-green);
            color: white;
            text-align: center;
            padding: 1rem;
            margin-top: 2rem;
        }

        @media (max-width: 768px) {
            .nav-links {
                flex-direction: column;
                position: fixed;
                top: 0;
                right: -100%;
                background: var(--background-white);
                height: 100vh;
                width: 250px;
                padding: 2rem;
                transition: var(--transition);
                z-index: 1000;
            }

            .nav-links.active {
                right: 0;
            }

            .hamburger {
                display: flex;
                flex-direction: column;
                gap: 0.25rem;
                cursor: pointer;
                z-index: 1100;
            }

            .hamburger span {
                width: 25px;
                height: 3px;
                background: var(--primary-green);
                transition: var(--transition);
            }

            .hamburger.active span:nth-child(1) {
                transform: rotate(45deg) translate(5px, 5px);
            }

            .hamburger.active span:nth-child(2) {
                opacity: 0;
            }

            .hamburger.active span:nth-child(3) {
                transform: rotate(-45deg) translate(5px, -5px);
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <img src="https://upload.wikimedia.org/wikipedia/en/thumb/8/82/MorrisonsLogo.svg/220px-MorrisonsLogo.svg.png" 
                 alt="Morrisons Logo" class="logo">
            <h1>Cleveleys Morrisons Dashboard</h1>
        </div>
        <button class="dark-mode-toggle" aria-label="Toggle dark mode">🌓</button>
    </header>

    <nav class="nav">
        <button class="hamburger" aria-expanded="false">
            <span></span>
            <span></span>
            <span></span>
        </button>
        <ul class="nav-links">
            <li><a class="nav-link" href="#tasks">Tasks</a></li>
            <li><a class="nav-link" href="#links">Important Links</a></li>
            <li><a class="nav-link" href="#rota">Management Rota</a></li>
            <li><a class="nav-link" href="#calendar">Calendar</a></li>
            <li><a class="nav-link" href="#notes">Notes</a></li>
        </ul>
    </nav>

    <main class="container">
        <!-- Sections with improved responsive grid -->
        <section class="card" id="tasks">
            <h2>Tasks</h2>
            <div class="iframe-container">
                <iframe loading="lazy" src="https://docs.google.com/spreadsheets/d/e/your-sheet-id/pubhtml"></iframe>
            </div>
        </section>

        <section class="card" id="links">
            <h2>Essential Links</h2>
            <div class="links-grid">
                <a href="#" class="link-card" target="_blank">2024 Wheel</a>
                <a href="#" class="link-card" target="_blank">Store Mobile</a>
                <a href="#" class="link-card" target="_blank">Waste Collection</a>
                <a href="#" class="link-card" target="_blank">Staff Checks</a>
                <!-- Add more links -->
            </div>
        </section>

        <section class="card" id="rota">
            <h2>Management Rota</h2>
            <div class="iframe-container">
                <iframe loading="lazy" src="https://docs.google.com/spreadsheets/d/e/your-rota-id/pubhtml"></iframe>
            </div>
        </section>

        <section class="card" id="calendar">
            <h2>Calendar</h2>
            <div class="iframe-container">
                <iframe loading="lazy" src="https://calendar.google.com/calendar/embed?src=your-calendar-id"></iframe>
            </div>
        </section>

        <section class="card" id="notes">
            <h2>Interactive Whiteboard</h2>
            <div class="whiteboard-container">
                <canvas id="whiteboard"></canvas>
                <div class="whiteboard-controls">
                    <input type="color" id="colorPicker" value="#000000">
                    <input type="range" id="brushSize" min="1" max="50" value="5">
                    <button class="control-btn" id="saveBtn">💾 Save</button>
                    <button class="control-btn" id="clearBtn">❌ Clear</button>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>© 2025 Cleveleys Morrisons. Secure Management Portal v2.0</p>
    </footer>

    <script>
        // Enhanced Dark Mode Toggle
        const toggleDarkMode = () => {
            document.body.classList.toggle('dark-mode');
            const isDark = document.body.classList.contains('dark-mode');
            localStorage.setItem('darkMode', isDark);
            document.querySelector('.dark-mode-toggle').textContent = isDark ? '☀️' : '🌓';
        };

        // Initialize Dark Mode
        if (localStorage.getItem('darkMode') === 'true') {
            document.body.classList.add('dark-mode');
            document.querySelector('.dark-mode-toggle').textContent = '☀️';
        }

        document.querySelector('.dark-mode-toggle').addEventListener('click', toggleDarkMode);

        // Mobile Navigation
        const hamburger = document.querySelector('.hamburger');
        const navLinks = document.querySelector('.nav-links');

        const toggleMenu = () => {
            hamburger.classList.toggle('active');
            navLinks.classList.toggle('active');
            document.body.style.overflow = navLinks.classList.contains('active') ? 'hidden' : '';
        };

        hamburger.addEventListener('click', toggleMenu);

        // Close menu on click outside
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.nav') && navLinks.classList.contains('active')) {
                toggleMenu();
            }
        });

        // Whiteboard Functionality
        const canvas = document.getElementById('whiteboard');
        const ctx = canvas.getContext('2d');
        let isDrawing = false;
        let lastX = 0;
        let lastY = 0;

        const resizeCanvas = () => {
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
        };
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        const startDrawing = (e) => {
            isDrawing = true;
            [lastX, lastY] = [e.offsetX || e.touches[0].pageX, e.offsetY || e.touches[0].pageY];
        };

        const draw = (e) => {
            if (!isDrawing) return;
            ctx.beginPath();
            ctx.moveTo(lastX, lastY);
            ctx.lineTo(e.offsetX || e.touches[0].pageX, e.offsetY || e.touches[0].pageY);
            ctx.strokeStyle = document.getElementById('colorPicker').value;
            ctx.lineWidth = document.getElementById('brushSize').value;
            ctx.lineCap = 'round';
            ctx.stroke();
            [lastX, lastY] = [e.offsetX || e.touches[0].pageX, e.offsetY || e.touches[0].pageY];
        };

        canvas.addEventListener('mousedown', startDrawing);
        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('mouseup', () => isDrawing = false);
        canvas.addEventListener('mouseout', () => isDrawing = false);
        canvas.addEventListener('touchstart', startDrawing);
        canvas.addEventListener('touchmove', draw);
        canvas.addEventListener('touchend', () => isDrawing = false);

        // Whiteboard Controls
        document.getElementById('clearBtn').addEventListener('click', () => {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        });

        document.getElementById('saveBtn').addEventListener('click', () => {
            const dataURL = canvas.toDataURL();
            localStorage.setItem('whiteboard', dataURL);
            alert('Whiteboard state saved!');
        });

        // Load saved whiteboard
        window.addEventListener('load', () => {
            const saved = localStorage.getItem('whiteboard');
            if (saved) {
                const img = new Image();
                img.src = saved;
                img.onload = () => ctx.drawImage(img, 0, 0);
            }
        });

        // Smooth Scroll
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });

        // Performance Optimization
        const debounce = (func, wait = 100) => {
            let timeout;
            return (...args) => {
                clearTimeout(timeout);
                timeout = setTimeout(() => func.apply(this, args), wait);
            };
        };

        window.addEventListener('resize', debounce(resizeCanvas));
    </script>
</body>
</html>
